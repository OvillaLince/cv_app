<div class="projects-container">
  <mat-tab-group>
    <mat-tab label="Database Projects">
      <mat-accordion multi="false">
        <mat-expansion-panel *ngFor="let project of dbProjects">
          <mat-expansion-panel-header>
            <mat-panel-title>{{ project.title }}</mat-panel-title>
          </mat-expansion-panel-header>

          <div class="project-wrapper" [ngClass]="{'two-column': project.image, 'one-column': !project.image}">
            <div class="code-column">
              <div class="code-wrapper">
                <div *ngIf="project.loaded_file; else loadingDb">
                  <div [innerHTML]="project.loaded_file.content"></div>
                </div>
                <ng-template #loadingDb>
                  <p class="loading-message">Loading code...</p>
                </ng-template>
              </div>
            </div>

            <div class="image-column" *ngIf="project.image">
              <ng-container *ngIf="project.image.endsWith('.pdf'); else imageViewDb">
                <object [data]="project.image" type="application/pdf" width="100%" height="500px">
                  <p>PDF preview not available. <a [href]="project.image" target="_blank">Download PDF</a></p>
                </object>
              </ng-container>
              <ng-template #imageViewDb>
                <img [src]="project.image" alt="Project image" />
              </ng-template>
            </div>
          </div>
        </mat-expansion-panel>
      </mat-accordion>
    </mat-tab>

    <mat-tab label="Data Science Projects">
      <mat-accordion multi="false">
        <mat-expansion-panel *ngFor="let project of dsProjects">
          <mat-expansion-panel-header>
            <mat-panel-title>{{ project.title }}</mat-panel-title>
          </mat-expansion-panel-header>

          <div class="project-wrapper" [ngClass]="{'two-column': project.image, 'one-column': !project.image}">
            <div class="code-column">
              <div class="code-wrapper">
                <div *ngIf="project.loaded_file; else loadingDs">
                  <div [innerHTML]="project.loaded_file.content"></div>
                </div>
                <ng-template #loadingDs>
                  <p class="loading-message">Loading code...</p>
                </ng-template>
              </div>
            </div>

            <div class="image-column" *ngIf="project.image">
              <ng-container *ngIf="project.image.endsWith('.pdf'); else imageViewDs">
                <object [data]="project.image" type="application/pdf" width="100%" height="500px">
                  <p>PDF preview not available. <a [href]="project.image" target="_blank">Download PDF</a></p>
                </object>
              </ng-container>
              <ng-template #imageViewDs>
                <img [src]="project.image" alt="Project image" />
              </ng-template>
            </div>
          </div>
        </mat-expansion-panel>
      </mat-accordion>
    </mat-tab>
  </mat-tab-group>
</div>
